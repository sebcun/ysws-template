{% extends "base.html" %} {% block title %}{{ site.home.title }}{% endblock %}
{% block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/dashboard.css') }}"
/>
<style>
  .fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  .form-check-input:checked + .form-check-label {
    text-decoration: line-through;
    color: #6c757d;
  }
</style>
{% endblock %} {% block hackclub_flag %} {% endblock %} {% block navbar_balance
%} {% endblock %} {% block content %}

<div class="container py-5 vh-100">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Projects</h1>
    <div class="d-flex align-items-center">
      <a
        href="{{ site.slack_link }}"
        id="needHelpBtn"
        class="btn btn-outline-secondary me-2"
        target="_blank"
      >
        <i class="bi bi-question-circle me-1"></i>Need help?
      </a>
      <button class="btn btn-primary" id="createProjectBtn">
        <i class="bi bi-plus-lg me-2"></i>Create Project
      </button>
    </div>
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="projectsGrid">
    <div class="col-12 text-center py-5" style="grid-column: 1 / -1">
      <div class="spinner-border text-primary mb-3" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="text-muted">Loading projects...</p>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="createProjectModal"
  tabindex="-1"
  aria-labelledby="createProjectModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content overflow-hidden border-0 shadow">
      <div class="modal-body p-4">
        <div class="mb-4">
          <h5 class="fw-bold">Project Title</h5>
          <input
            type="text"
            class="form-control"
            id="createProjectTitle"
            placeholder="Awesome Mega Cool Project"
            required
          />
        </div>

        <div class="mb-4">
          <h5 class="fw-bold">Description</h5>
          <textarea
            class="form-control"
            id="createProjectDesc"
            rows="3"
            placeholder="This is my Awesome Mega Cool Project that I made."
            required
          ></textarea>
        </div>

        <div class="mb-4">
          <h5 class="form-label fw-bold">Hackatime Projects</h5>
          <div class="dropdown">
            <button
              class="btn custom-dropdown-btn w-100 text-start d-flex justify-content-between align-items-center"
              type="button"
              id="createHackatimeDropdown"
              data-bs-toggle="dropdown"
              data-bs-auto-close="outside"
              aria-expanded="false"
            >
              <span id="createSelectedProjectsText" class="text-muted"
                >Select projects...</span
              >
              <i class="bi bi-chevron-down"></i>
            </button>
            <ul
              class="dropdown-menu w-100 scrollable"
              aria-labelledby="createHackatimeDropdown"
              id="createHackatimeList"
            ></ul>
          </div>
        </div>

        <div class="mb-4">
          <h5 class="fw-bold mb-3">Links</h5>
          <div class="d-flex gap-3 flex-column flex-md-row">
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-github"></i
              ></span>
              <input
                type="url"
                class="form-control form-control-modern group-end"
                placeholder="Github Link"
                id="createGithubInput"
                required
              />
            </div>
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-link-45deg"></i
              ></span>
              <input
                type="url"
                class="form-control form-control-modern group-end"
                placeholder="Demo Link"
                id="createDemoInput"
                required
              />
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-5">
          <button
            type="button"
            class="btn btn-outline-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-primary"
            id="createProjectSaveBtn"
            disabled
          >
            Create Project
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="projectModal"
  tabindex="-1"
  aria-labelledby="projectModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content overflow-hidden border-0 shadow">
      <div class="modal-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="w-100 me-3">
            <h2 class="modal-title fw-bold mb-0" id="projectModalLabel"></h2>
            <input
              type="text"
              class="form-control"
              id="projectTitleInput"
              style="display: none"
            />
          </div>
          <div class="d-flex align-items-center gap-2">
            <span class="fw-bold fs-5" id="projectModalHours">0h</span>
            <span class="badge bg-success" id="projectModalBadge">SHIPPED</span>
          </div>
        </div>

        <div class="mb-4">
          <h5 class="fw-bold">Description</h5>
          <p class="text-muted" id="projectDescText"></p>
          <textarea
            class="form-control"
            id="projectDescInput"
            rows="3"
            style="display: none"
          ></textarea>
        </div>

        <div class="mb-4">
          <label class="form-label fw-bold">Hackatime Projects</label>
          <div class="dropdown">
            <button
              class="btn custom-dropdown-btn w-100 text-start d-flex justify-content-between align-items-center"
              type="button"
              id="hackatimeDropdown"
              data-bs-toggle="dropdown"
              data-bs-auto-close="outside"
              aria-expanded="false"
              disabled
            >
              <span id="selectedProjectsText" class="text-muted"
                >Select projects...</span
              >
              <i class="bi bi-chevron-down"></i>
            </button>
            <ul
              class="dropdown-menu w-100 scrollable"
              aria-labelledby="hackatimeDropdown"
              id="hackatimeList"
            ></ul>
          </div>
        </div>

        <div class="mb-4">
          <h5 class="fw-bold mb-3">Links</h5>
          <div class="d-flex gap-3 flex-column flex-md-row">
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-github"></i
              ></span>
              <input
                type="text"
                class="form-control form-control-modern group-end"
                placeholder="Github Link"
                id="githubInput"
                readonly
              />
            </div>
            <div class="input-group">
              <span class="input-group-text input-group-text-modern"
                ><i class="bi bi-link-45deg"></i
              ></span>
              <input
                type="text"
                class="form-control form-control-modern group-end"
                placeholder="Demo Link"
                id="demoInput"
                readonly
              />
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-5">
          <button type="button" class="btn btn-outline-danger" id="deleteBtn">
            Delete
          </button>
          <button type="button" class="btn btn-outline-secondary" id="editBtn">
            Edit
          </button>
          <button type="button" class="btn btn-primary" id="submitBtn">
            Submit
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary"
            id="cancelEditBtn"
            style="display: none"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-primary"
            id="saveBtn"
            style="display: none"
          >
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="imageUploadModal"
  tabindex="-1"
  aria-labelledby="imageUploadModalLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content shadow border-0 rounded-3">
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold" id="imageUploadModalLabel">
          Upload Project Banner
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p class="text-muted mb-3">Please upload a banner image for your project before submitting.</p>
        <div id="dropZone">
          <input
            type="file"
            class="d-none"
            id="submitImageInput"
            accept="image/png, image/jpeg, image/jpg, image/gif, image/webp"
            required
          />
          <div id="dropZoneContent">
            <p class="mb-2 fw-bold">Drag & Drop your image here</p>
            <p class="text-muted small mb-2">or</p>
            <button type="button" class="btn btn-outline-primary btn-sm" id="selectFileBtn">Browse Files</button>
            <p class="text-muted small mt-3 mb-0">PNG, JPG, GIF, or WebP (max 16MB)</p>
          </div>
          <div id="submitImagePreview" style="display: none;">
            <img id="submitImagePreviewImg" src="" alt="Preview" class="img-fluid rounded" style="max-height: 300px; object-fit: contain;">
            <button type="button" class="btn btn-sm btn-outline-secondary mt-3" id="changeImageBtn">Change Image</button>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-primary"
          id="continueToChecklistBtn"
          disabled
        >
          Continue to Checklist
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="submitChecklistModal"
  tabindex="-1"
  aria-labelledby="submitChecklistModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content shadow border-0 rounded-3">
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold" id="submitChecklistModalLabel">
          Submit Project
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            id="checkHours"
            disabled
          />
          <label class="form-check-label" for="checkHours"
            >Worked on this project for at least 3 hours</label
          >
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            id="checkDemo"
            disabled
          />
          <label class="form-check-label" for="checkDemo"
            >A working demo link</label
          >
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            id="checkGithub"
            disabled
          />
          <label class="form-check-label" for="checkGithub"
            >A Git repo link</label
          >
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="checkReadme" />
          <label class="form-check-label" for="checkReadme"
            >A readme on the Git repo that is not written by AI</label
          >
        </div>
        <div class="form-check mb-3">
          <input
            class="form-check-input"
            type="checkbox"
            id="checkBanner"
            disabled
          />
          <label class="form-check-label" for="checkBanner"
            >A banner image for the project has been uploaded</label
          >
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="checkShippable" />
          <label class="form-check-label" for="checkShippable"
            >The project is in a working, shippable state</label
          >
        </div>
      </div>
      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          Nevermind
        </button>
        <button
          type="button"
          class="btn btn-primary"
          id="finalSubmitBtn"
          disabled
        >
          Submit
        </button>
      </div>
    </div>
  </div>
</div>

<footer class="py-4 bg-light text-center">
  <div class="container">
    <span class="text-muted"
      >This website is <a href="{{ site.github }}">Open source!</a></span
    >
  </div>
</footer>

<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
